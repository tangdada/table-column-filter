"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var updateTiming=void 0,getColumnOptions=function(e){for(var t=e.getElementsByTagName("th"),n=[],a=0;a<t.length;a++){var l=t[a],i=(l.attributes.col||{}).value;if(i){var r={name:i,disabled:!!l.attributes.basic,unchecked:!!l.attributes.unchecked};n.push(r)}}return n},directive={inserted:function(s){var e=getColumnOptions(s),l=document.createElement("div");l.style.textAlign="left";var t=document.createElement("a");t.style.cursor="pointer",t.innerHTML="表格自定义",t.addEventListener("click",function(){var e=document.getElementById("table-columns-checkboxs");"none"==e.style.display?(e.style.display="initial",t.innerHTML="收起自定义"):(e.style.display="none",t.innerHTML="表格自定义")}),l.appendChild(t);var i=document.createElement("span");i.setAttribute("id","table-columns-checkboxs"),i.style.display="none",i.style.marginLeft="20px",e.forEach(function(e){var t=document.createElement("label");t.setAttribute("for",e.name),t.style.display="inline-block",t.style.marginRight="10px";var n=document.createElement("input");n.setAttribute("type","checkbox"),n.setAttribute("checked",!0),n.setAttribute("id",e.name),n.disabled=!!e.disabled,n.checked=!e.unchecked,n.addEventListener("change",function(e){for(var t=e.target.id,n=e.target.checked,a=s.getElementsByTagName("th"),l=0;l<a.length;l++){var i=a[l];if(i.attributes.col&&i.attributes.col.value==t){i.style.display=n?"table-cell":"none";for(var r=s.getElementsByTagName("tr"),d=0;d<r.length;d++){var c=r[d].getElementsByTagName("td");c[l]&&(c[l].style.display=n?"table-cell":"none")}}}}),t.appendChild(n);var a=document.createTextNode(e.name);t.appendChild(a),i.appendChild(t),l.appendChild(i)}),s.parentNode.insertBefore(l,s)},update:function(s){updateTiming||(updateTiming=setTimeout(function(){updateTiming=void 0;for(var e=document.getElementById("table-columns-checkboxs").getElementsByTagName("input"),t=0;t<e.length;t++)for(var n=e[t],a=s.getElementsByTagName("th"),l=0;l<a.length;l++){var i=a[l];if(i.attributes.col&&i.attributes.col.value==n.id){i.style.display=n.checked?"table-cell":"none";for(var r=s.getElementsByTagName("tr"),d=0;d<r.length;d++){var c=r[d].getElementsByTagName("td");c[l]&&(c[l].style.display=n.checked?"table-cell":"none")}}}},400))}};exports.default=directive;